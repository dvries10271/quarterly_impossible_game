<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quarterly Impossible Game Assessment</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #FF6B35 0%, #F7931E 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .progress-container {
            padding: 20px 40px;
            background: #f8fafc;
            border-bottom: 1px solid #e2e8f0;
        }

        .progress-steps {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            overflow-x: auto;
            padding-bottom: 10px;
        }

        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            flex: 1;
            min-width: 50px;
            position: relative;
        }

        .step:not(:last-child)::after {
            content: '';
            position: absolute;
            top: 20px;
            left: 50%;
            width: 100%;
            height: 2px;
            background: #e2e8f0;
            z-index: 0;
        }

        .step.active:not(:last-child)::after {
            background: #667eea;
        }

        .step-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #e2e8f0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #a0aec0;
            z-index: 1;
            position: relative;
            font-size: 0.9em;
        }

        .step.active .step-circle {
            background: #667eea;
            color: white;
        }

        .step.completed .step-circle {
            background: #48bb78;
            color: white;
        }

        .step-label {
            margin-top: 8px;
            font-size: 0.7em;
            color: #718096;
            text-align: center;
            white-space: nowrap;
        }

        .step.active .step-label {
            color: #667eea;
            font-weight: 600;
        }

        .progress-bar {
            background: #e2e8f0;
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .progress-fill {
            background: linear-gradient(90deg, #667eea, #764ba2);
            height: 100%;
            width: 0%;
            transition: width 0.3s ease;
        }

        .step-indicator {
            text-align: center;
            color: #4a5568;
            font-size: 0.9em;
        }

        .form-content {
            padding: 40px;
            min-height: 500px;
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
            animation: fadeIn 0.3s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .domain-header {
            display: flex;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 3px solid #e2e8f0;
        }

        .domain-icon {
            font-size: 2.5em;
            margin-right: 15px;
        }

        .domain-title {
            font-size: 2em;
            color: #2d3748;
        }

        .body-section .domain-header { border-bottom-color: #FF6B35; }
        .being-section .domain-header { border-bottom-color: #667eea; }
        .balance-section .domain-header { border-bottom-color: #48bb78; }
        .business-section .domain-header { border-bottom-color: #f6ad55; }

        .subsection {
            background: #f8fafc;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 25px;
        }

        .subsection h3 {
            color: #4a5568;
            margin-bottom: 20px;
            font-size: 1.4em;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            color: #4a5568;
            font-weight: 600;
        }

        .input-group input,
        .input-group select,
        .input-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s;
        }

        .input-group input:focus,
        .input-group select:focus,
        .input-group textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .input-group textarea {
            min-height: 120px;
            resize: vertical;
        }

        .goals-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .radio-group {
            display: flex;
            gap: 30px;
            margin: 20px 0;
        }

        .radio-group label {
            display: flex;
            align-items: center;
            cursor: pointer;
            font-size: 1.1em;
        }

        .radio-group input[type="radio"] {
            margin-right: 10px;
            width: 20px;
            height: 20px;
        }

        .info-box {
            background: #edf2f7;
            border-left: 4px solid #667eea;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .info-box strong {
            color: #2d3748;
        }

        .on-track-section {
            background: #fff5f5;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .fruit-type {
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 20px;
        }

        .fruit-type h4 {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .growth-badge {
            background: #667eea;
            color: white;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 0.9em;
            margin-left: 12px;
            font-weight: bold;
        }

        .reasonable .growth-badge { background: #48bb78; }
        .radical .growth-badge { background: #ed8936; }
        .impossible .growth-badge { background: #e53e3e; }

        .description-text {
            color: #718096;
            margin-bottom: 20px;
            font-size: 0.95em;
            line-height: 1.5;
        }

        .missions-section {
            background: #e6fffa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 25px;
        }

        .metric-section {
            background: #f0fff4;
            padding: 25px;
            border-radius: 10px;
        }

        .metric-inputs {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            padding: 30px 40px;
            background: #f8fafc;
            border-top: 1px solid #e2e8f0;
        }

        .nav-btn {
            padding: 14px 35px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid #667eea;
        }

        .btn-prev {
            background: white;
            color: #667eea;
        }

        .btn-prev:hover {
            background: #f8fafc;
        }

        .btn-next {
            background: #667eea;
            color: white;
            border: none;
        }

        .btn-next:hover {
            background: #5a67d8;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        .btn-submit {
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
            color: white;
            border: none;
        }

        .btn-submit:hover {
            background: linear-gradient(135deg, #38a169 0%, #2f855a 100%);
        }

        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .summary-card {
            background: #f8fafc;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #e2e8f0;
        }

        .summary-card h4 {
            color: #4a5568;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            font-size: 1.1em;
        }

        .summary-card .domain-icon {
            font-size: 1.3em;
            margin-right: 8px;
        }

        .summary-item {
            margin: 8px 0;
            color: #2d3748;
            font-size: 0.95em;
        }

        .summary-item strong {
            color: #4a5568;
        }

        @media (max-width: 768px) {
            .form-content {
                padding: 20px;
            }
            
            .goals-grid {
                grid-template-columns: 1fr;
            }

            .header h1 {
                font-size: 1.8em;
            }

            .domain-title {
                font-size: 1.5em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🎯 Quarterly Impossible Game</h1>
            <p>Transform Your Life Through Breakthrough Goals</p>
        </div>

        <div class="progress-container">
            <div class="progress-steps">
                <div class="step active" data-step="1">
                    <div class="step-circle">1</div>
                    <div class="step-label">Info</div>
                </div>
                <div class="step" data-step="2">
                    <div class="step-circle">2</div>
                    <div class="step-label">Body R</div>
                </div>
                <div class="step" data-step="3">
                    <div class="step-circle">3</div>
                    <div class="step-label">Being R</div>
                </div>
                <div class="step" data-step="4">
                    <div class="step-circle">4</div>
                    <div class="step-label">Balance R</div>
                </div>
                <div class="step" data-step="5">
                    <div class="step-circle">5</div>
                    <div class="step-label">Business R</div>
                </div>
                <div class="step" data-step="6">
                    <div class="step-circle">6</div>
                    <div class="step-label">Body V</div>
                </div>
                <div class="step" data-step="7">
                    <div class="step-circle">7</div>
                    <div class="step-label">Being V</div>
                </div>
                <div class="step" data-step="8">
                    <div class="step-circle">8</div>
                    <div class="step-label">Balance V</div>
                </div>
                <div class="step" data-step="9">
                    <div class="step-circle">9</div>
                    <div class="step-label">Business V</div>
                </div>
                <div class="step" data-step="10">
                    <div class="step-circle">10</div>
                    <div class="step-label">Body M</div>
                </div>
                <div class="step" data-step="11">
                    <div class="step-circle">11</div>
                    <div class="step-label">Being M</div>
                </div>
                <div class="step" data-step="12">
                    <div class="step-circle">12</div>
                    <div class="step-label">Balance M</div>
                </div>
                <div class="step" data-step="13">
                    <div class="step-circle">13</div>
                    <div class="step-label">Business M</div>
                </div>
                <div class="step" data-step="14">
                    <div class="step-circle">14</div>
                    <div class="step-label">Review</div>
                </div>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressBar"></div>
            </div>
            <div class="step-indicator" id="stepIndicator">Step 1 of 14</div>
        </div>

        <form id="impossibleGameForm">
            <div class="form-content">
                <!-- Section 1: User Information -->
                <div class="section active" data-section="1">
                    <h2 style="margin-bottom: 30px; color: #2d3748;">Your Information</h2>
                    
                    <div class="input-group">
                        <label for="user_name">Full Name *</label>
                        <input type="text" id="user_name" name="user_name" required>
                    </div>
                    
                    <div class="input-group">
                        <label for="user_email">Email Address *</label>
                        <input type="email" id="user_email" name="user_email" required>
                    </div>
                    
                    <div class="input-group">
                        <label for="quarter_year">Quarter *</label>
                        <select id="quarter_year" name="quarter_year" required>
                            <option value="">Select Quarter</option>
                            <option value="Q1 2025">Q1 2025 (Jan-Mar)</option>
                            <option value="Q2 2025">Q2 2025 (Apr-Jun)</option>
                            <option value="Q3 2025">Q3 2025 (Jul-Sep)</option>
                            <option value="Q4 2025">Q4 2025 (Oct-Dec)</option>
                        </select>
                    </div>
                    
                    <div class="input-group">
                        <label for="submission_date">Assessment Date *</label>
                        <input type="date" id="submission_date" name="submission_date" required>
                    </div>

                    <div class="info-box">
                        <strong>Welcome to Your Quarterly Impossible Game!</strong>
                        <p style="margin-top: 10px;">This assessment follows a strategic flow:</p>
                        <ul style="margin-top: 10px; margin-left: 20px;">
                            <li><strong>Review:</strong> Assess progress on last quarter's missions (Steps 2-5)</li>
                            <li><strong>Vision:</strong> Set 12-month breakthrough goals (Steps 6-9)</li>
                            <li><strong>Plan:</strong> Define new quarterly missions (Steps 10-13)</li>
                            <li><strong>Commit:</strong> Review and submit (Step 14)</li>
                        </ul>
                    </div>
                </div>

                <!-- Section 2: BODY Current Quarter Review -->
                <div class="section body-section" data-section="2">
                    <div class="domain-header">
                        <span class="domain-icon">💪</span>
                        <h2 class="domain-title">BODY - Current Quarter Review</h2>
                    </div>

                    <div class="subsection">
                        <h3>Current Quarterly Missions</h3>
                        <div class="info-box">
                            <strong>Note:</strong> These are your missions from last quarter. If you're just starting, enter your current focus areas.
                        </div>
                        <div class="goals-grid">
                            <div class="input-group">
                                <label for="body_current_mission_1">Current Mission #1</label>
                                <input type="text" id="body_current_mission_1" name="body_current_mission_1" placeholder="Enter previous quarter's mission">
                            </div>
                            <div class="input-group">
                                <label for="body_current_mission_2">Current Mission #2</label>
                                <input type="text" id="body_current_mission_2" name="body_current_mission_2" placeholder="Enter previous quarter's mission">
                            </div>
                            <div class="input-group">
                                <label for="body_current_mission_3">Current Mission #3</label>
                                <input type="text" id="body_current_mission_3" name="body_current_mission_3" placeholder="Enter previous quarter's mission">
                            </div>
                            <div class="input-group">
                                <label for="body_current_mission_4">Current Mission #4</label>
                                <input type="text" id="body_current_mission_4" name="body_current_mission_4" placeholder="Enter previous quarter's mission">
                            </div>
                        </div>
                    </div>

                    <div class="on-track-section">
                        <h3>Progress Assessment</h3>
                        <label style="font-size: 1.1em; margin-bottom: 15px; display: block;">Are you currently on track to win this Impossible Game?</label>
                        <div class="radio-group">
                            <label><input type="radio" name="body_on_track" value="YES"> Yes</label>
                            <label><input type="radio" name="body_on_track" value="NO"> No</label>
                        </div>
                        <div class="input-group" style="margin-top: 20px;">
                            <label for="body_correction_plan">If NO, what's your correction plan?</label>
                            <textarea id="body_correction_plan" name="body_correction_plan" placeholder="What can you do this week to get back on track?"></textarea>
                        </div>
                    </div>

                    <div class="subsection">
                        <h3>Reflection</h3>
                        <div class="input-group">
                            <label for="body_story">What story are you telling yourself about your Body progress?</label>
                            <textarea id="body_story" name="body_story" placeholder="Describe your internal narrative..."></textarea>
                        </div>
                        <div class="input-group">
                            <label for="body_feelings">What feelings arise when you tell yourself this story?</label>
                            <input type="text" id="body_feelings" name="body_feelings" placeholder="e.g., Frustrated, energized, disappointed">
                        </div>
                    </div>
                </div>

                <!-- Section 3: BEING Current Quarter Review -->
                <div class="section being-section" data-section="3">
                    <div class="domain-header">
                        <span class="domain-icon">🧠</span>
                        <h2 class="domain-title">BEING - Current Quarter Review</h2>
                    </div>

                    <div class="subsection">
                        <h3>Current Quarterly Missions</h3>
                        <div class="info-box">
                            <strong>Note:</strong> These are your missions from last quarter. If you're just starting, enter your current focus areas.
                        </div>
                        <div class="goals-grid">
                            <div class="input-group">
                                <label for="being_current_mission_1">Current Mission #1</label>
                                <input type="text" id="being_current_mission_1" name="being_current_mission_1" placeholder="Enter previous quarter's mission">
                            </div>
                            <div class="input-group">
                                <label for="being_current_mission_2">Current Mission #2</label>
                                <input type="text" id="being_current_mission_2" name="being_current_mission_2" placeholder="Enter previous quarter's mission">
                            </div>
                            <div class="input-group">
                                <label for="being_current_mission_3">Current Mission #3</label>
                                <input type="text" id="being_current_mission_3" name="being_current_mission_3" placeholder="Enter previous quarter's mission">
                            </div>
                            <div class="input-group">
                                <label for="being_current_mission_4">Current Mission #4</label>
                                <input type="text" id="being_current_mission_4" name="being_current_mission_4" placeholder="Enter previous quarter's mission">
                            </div>
                        </div>
                    </div>

                    <div class="on-track-section">
                        <h3>Progress Assessment</h3>
                        <label style="font-size: 1.1em; margin-bottom: 15px; display: block;">Are you currently on track to win this Impossible Game?</label>
                        <div class="radio-group">
                            <label><input type="radio" name="being_on_track" value="YES"> Yes</label>
                            <label><input type="radio" name="being_on_track" value="NO"> No</label>
                        </div>
                        <div class="input-group" style="margin-top: 20px;">
                            <label for="being_correction_plan">If NO, what's your correction plan?</label>
                            <textarea id="being_correction_plan" name="being_correction_plan" placeholder="What can you do this week to get back on track?"></textarea>
                        </div>
                    </div>

                    <div class="subsection">
                        <h3>Reflection</h3>
                        <div class="input-group">
                            <label for="being_story">What story are you telling yourself about your Being progress?</label>
                            <textarea id="being_story" name="being_story" placeholder="Describe your internal narrative..."></textarea>
                        </div>
                        <div class="input-group">
                            <label for="being_feelings">What feelings arise when you tell yourself this story?</label>
                            <input type="text" id="being_feelings" name="being_feelings" placeholder="e.g., Peaceful, anxious, grounded">
                        </div>
                    </div>
                </div>

                <!-- Section 4: BALANCE Current Quarter Review -->
                <div class="section balance-section" data-section="4">
                    <div class="domain-header">
                        <span class="domain-icon">⚖️</span>
                        <h2 class="domain-title">BALANCE - Current Quarter Review</h2>
                    </div>

                    <div class="subsection">
                        <h3>Current Quarterly Missions</h3>
                        <div class="info-box">
                            <strong>Note:</strong> These are your missions from last quarter. If you're just starting, enter your current focus areas.
                        </div>
                        <div class="goals-grid">
                            <div class="input-group">
                                <label for="balance_current_mission_1">Current Mission #1</label>
                                <input type="text" id="balance_current_mission_1" name="balance_current_mission_1" placeholder="Enter previous quarter's mission">
                            </div>
                            <div class="input-group">
                                <label for="balance_current_mission_2">Current Mission #2</label>
                                <input type="text" id="balance_current_mission_2" name="balance_current_mission_2" placeholder="Enter previous quarter's mission">
                            </div>
                            <div class="input-group">
                                <label for="balance_current_mission_3">Current Mission #3</label>
                                <input type="text" id="balance_current_mission_3" name="balance_current_mission_3" placeholder="Enter previous quarter's mission">
                            </div>
                            <div class="input-group">
                                <label for="balance_current_mission_4">Current Mission #4</label>
                                <input type="text" id="balance_current_mission_4" name="balance_current_mission_4" placeholder="Enter previous quarter's mission">
                            </div>
                        </div>
                    </div>

                    <div class="on-track-section">
                        <h3>Progress Assessment</h3>
                        <label style="font-size: 1.1em; margin-bottom: 15px; display: block;">Are you currently on track to win this Impossible Game?</label>
                        <div class="radio-group">
                            <label><input type="radio" name="balance_on_track" value="YES"> Yes</label>
                            <label><input type="radio" name="balance_on_track" value="NO"> No</label>
                        </div>
                        <div class="input-group" style="margin-top: 20px;">
                            <label for="balance_correction_plan">If NO, what's your correction plan?</label>
                            <textarea id="balance_correction_plan" name="balance_correction_plan" placeholder="What can you do this week to get back on track?"></textarea>
                        </div>
                    </div>

                    <div class="subsection">
                        <h3>Reflection</h3>
                        <div class="input-group">
                            <label for="balance_story">What story are you telling yourself about your Balance progress?</label>
                            <textarea id="balance_story" name="balance_story" placeholder="Describe your internal narrative..."></textarea>
                        </div>
                        <div class="input-group">
                            <label for="balance_feelings">What feelings arise when you tell yourself this story?</label>
                            <input type="text" id="balance_feelings" name="balance_feelings" placeholder="e.g., Connected, isolated, harmonious">
                        </div>
                    </div>
                </div>

                <!-- Section 5: BUSINESS Current Quarter Review -->
                <div class="section business-section" data-section="5">
                    <div class="domain-header">
                        <span class="domain-icon">💼</span>
                        <h2 class="domain-title">BUSINESS - Current Quarter Review</h2>
                    </div>

                    <div class="subsection">
                        <h3>Current Quarterly Missions</h3>
                        <div class="info-box">
                            <strong>Note:</strong> These are your missions from last quarter. If you're just starting, enter your current focus areas.
                        </div>
                        <div class="goals-grid">
                            <div class="input-group">
                                <label for="business_current_mission_1">Current Mission #1</label>
                                <input type="text" id="business_current_mission_1" name="business_current_mission_1" placeholder="Enter previous quarter's mission">
                            </div>
                            <div class="input-group">
                                <label for="business_current_mission_2">Current Mission #2</label>
                                <input type="text" id="business_current_mission_2" name="business_current_mission_2" placeholder="Enter previous quarter's mission">
                            </div>
                            <div class="input-group">
                                <label for="business_current_mission_3">Current Mission #3</label>
                                <input type="text" id="business_current_mission_3" name="business_current_mission_3" placeholder="Enter previous quarter's mission">
                            </div>
                            <div class="input-group">
                                <label for="business_current_mission_4">Current Mission #4</label>
                                <input type="text" id="business_current_mission_4" name="business_current_mission_4" placeholder="Enter previous quarter's mission">
                            </div>
                        </div>
                    </div>

                    <div class="on-track-section">
                        <h3>Progress Assessment</h3>
                        <label style="font-size: 1.1em; margin-bottom: 15px; display: block;">Are you currently on track to win this Impossible Game?</label>
                        <div class="radio-group">
                            <label><input type="radio" name="business_on_track" value="YES"> Yes</label>
                            <label><input type="radio" name="business_on_track" value="NO"> No</label>
                        </div>
                        <div class="input-group" style="margin-top: 20px;">
                            <label for="business_correction_plan">If NO, what's your correction plan?</label>
                            <textarea id="business_correction_plan" name="business_correction_plan" placeholder="What can you do this week to get back on track?"></textarea>
                        </div>
                    </div>

                    <div class="subsection">
                        <h3>Reflection</h3>
                        <div class="input-group">
                            <label for="business_story">What story are you telling yourself about your Business progress?</label>
                            <textarea id="business_story" name="business_story" placeholder="Describe your internal narrative..."></textarea>
                        </div>
                        <div class="input-group">
                            <label for="business_feelings">What feelings arise when you tell yourself this story?</label>
                            <input type="text" id="business_feelings" name="business_feelings" placeholder="e.g., Confident, overwhelmed, excited">
                        </div>
                    </div>
                </div>

                <!-- Section 6: BODY 12-Month Vision -->
                <div class="section body-section" data-section="6">
                    <div class="domain-header">
                        <span class="domain-icon">💪</span>
                        <h2 class="domain-title">BODY - 12-Month Vision</h2>
                    </div>

                    <div class="subsection">
                        <h3>What fruit would make you pleased with progress in 12 months?</h3>
                        
                        <div class="fruit-type reasonable">
                            <h4>Reasonable Fruit <span class="growth-badge">1-2x Growth</span></h4>
                            <p class="description-text">
                                <strong>Reasonable:</strong> Good results that don't exceed the limits prescribed by reason; not excessive, logical, or moderate. These are achievable goals that stretch you but remain within the realm of normal progress.
                            </p>
                            <div class="goals-grid">
                                <input type="text" name="body_reasonable_1" placeholder="e.g., Lose 20 pounds">
                                <input type="text" name="body_reasonable_2" placeholder="e.g., Run a 5K">
                                <input type="text" name="body_reasonable_3" placeholder="e.g., Gym 3x per week consistently">
                                <input type="text" name="body_reasonable_4" placeholder="e.g., Reduce body fat by 5%">
                            </div>
                        </div>

                        <div class="fruit-type radical">
                            <h4>Radical Fruit <span class="growth-badge">4-5x Growth</span></h4>
                            <p class="description-text">
                                <strong>Radical:</strong> Extreme results that excessively surpass reasonable, logical, or moderate expectations. These goals would require significant life changes and dedicated effort.
                            </p>
                            <div class="goals-grid">
                                <input type="text" name="body_radical_1" placeholder="e.g., Complete a marathon">
                                <input type="text" name="body_radical_2" placeholder="e.g., Six-pack abs">
                                <input type="text" name="body_radical_3" placeholder="e.g., Deadlift 2x bodyweight">
                                <input type="text" name="body_radical_4" placeholder="e.g., 10% body fat">
                            </div>
                        </div>

                        <div class="fruit-type impossible">
                            <h4>Impossible Fruit <span class="growth-badge">10x Growth</span></h4>
                            <p class="description-text">
                                <strong>Impossible:</strong> Utterly not possible, unable to be, exist, incapable of being true or happening. These are breakthrough transformations that seem beyond current capabilities.
                            </p>
                            <div class="goals-grid">
                                <input type="text" name="body_impossible_1" placeholder="e.g., Complete an Ironman">
                                <input type="text" name="body_impossible_2" placeholder="e.g., Bodybuilding competition">
                                <input type="text" name="body_impossible_3" placeholder="e.g., Climb Mount Everest">
                                <input type="text" name="body_impossible_4" placeholder="e.g., Professional athlete level">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Section 7: BEING 12-Month Vision -->
                <div class="section being-section" data-section="7">
                    <div class="domain-header">
                        <span class="domain-icon">🧠</span>
                        <h2 class="domain-title">BEING - 12-Month Vision</h2>
                    </div>

                    <div class="subsection">
                        <h3>What fruit would make you pleased with progress in 12 months?</h3>
                        
                        <div class="fruit-type reasonable">
                            <h4>Reasonable Fruit <span class="growth-badge">1-2x Growth</span></h4>
                            <p class="description-text">
                                <strong>Reasonable:</strong> Good spiritual/mental results within logical limits. Achievable personal development that builds on current practices.
                            </p>
                            <div class="goals-grid">
                                <input type="text" name="being_reasonable_1" placeholder="e.g., Daily 10-min meditation">
                                <input type="text" name="being_reasonable_2" placeholder="e.g., Read 12 books">
                                <input type="text" name="being_reasonable_3" placeholder="e.g., Weekly therapy sessions">
                                <input type="text" name="being_reasonable_4" placeholder="e.g., Journal 3x per week">
                            </div>
                        </div>

                        <div class="fruit-type radical">
                            <h4>Radical Fruit <span class="growth-badge">4-5x Growth</span></h4>
                            <p class="description-text">
                                <strong>Radical:</strong> Extreme spiritual breakthroughs beyond reasonable expectations. Deep transformational work requiring significant commitment.
                            </p>
                            <div class="goals-grid">
                                <input type="text" name="being_radical_1" placeholder="e.g., 30-day silent retreat">
                                <input type="text" name="being_radical_2" placeholder="e.g., Heal family trauma">
                                <input type="text" name="being_radical_3" placeholder="e.g., Daily hour meditation">
                                <input type="text" name="being_radical_4" placeholder="e.g., Master new philosophy">
                            </div>
                        </div>

                        <div class="fruit-type impossible">
                            <h4>Impossible Fruit <span class="growth-badge">10x Growth</span></h4>
                            <p class="description-text">
                                <strong>Impossible:</strong> Complete spiritual transformation that seems utterly beyond reach. Life-changing breakthroughs in consciousness and being.
                            </p>
                            <div class="goals-grid">
                                <input type="text" name="being_impossible_1" placeholder="e.g., Enlightenment experience">
                                <input type="text" name="being_impossible_2" placeholder="e.g., Write spiritual book">
                                <input type="text" name="being_impossible_3" placeholder="e.g., Lead 100 people">
                                <input type="text" name="being_impossible_4" placeholder="e.g., Complete ego death">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Section 8: BALANCE 12-Month Vision -->
                <div class="section balance-section" data-section="8">
                    <div class="domain-header">
                        <span class="domain-icon">⚖️</span>
                        <h2 class="domain-title">BALANCE - 12-Month Vision</h2>
                    </div>

                    <div class="subsection">
                        <h3>What fruit would make you pleased with progress in 12 months?</h3>
                        
                        <div class="fruit-type reasonable">
                            <h4>Reasonable Fruit <span class="growth-badge">1-2x Growth</span></h4>
                            <p class="description-text">
                                <strong>Reasonable:</strong> Good relationship results within logical limits. Steady improvements in family and social connections.
                            </p>
                            <div class="goals-grid">
                                <input type="text" name="balance_reasonable_1" placeholder="e.g., Weekly date nights">
                                <input type="text" name="balance_reasonable_2" placeholder="e.g., Monthly family dinners">
                                <input type="text" name="balance_reasonable_3" placeholder="e.g., Call parents weekly">
                                <input type="text" name="balance_reasonable_4" placeholder="e.g., Join social group">
                            </div>
                        </div>

                        <div class="fruit-type radical">
                            <h4>Radical Fruit <span class="growth-badge">4-5x Growth</span></h4>
                            <p class="description-text">
                                <strong>Radical:</strong> Extreme relationship transformations. Major breakthroughs in connection and intimacy.
                            </p>
                            <div class="goals-grid">
                                <input type="text" name="balance_radical_1" placeholder="e.g., Second honeymoon">
                                <input type="text" name="balance_radical_2" placeholder="e.g., Heal family rifts">
                                <input type="text" name="balance_radical_3" placeholder="e.g., Build community">
                                <input type="text" name="balance_radical_4" placeholder="e.g., Deep vulnerability">
                            </div>
                        </div>

                        <div class="fruit-type impossible">
                            <h4>Impossible Fruit <span class="growth-badge">10x Growth</span></h4>
                            <p class="description-text">
                                <strong>Impossible:</strong> Complete relationship revolution that seems impossible. Total transformation of family and social dynamics.
                            </p>
                            <div class="goals-grid">
                                <input type="text" name="balance_impossible_1" placeholder="e.g., Unite entire family">
                                <input type="text" name="balance_impossible_2" placeholder="e.g., Year-long travel">
                                <input type="text" name="balance_impossible_3" placeholder="e.g., Impact 1000 families">
                                <input type="text" name="balance_impossible_4" placeholder="e.g., Perfect marriage">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Section 9: BUSINESS 12-Month Vision -->
                <div class="section business-section" data-section="9">
                    <div class="domain-header">
                        <span class="domain-icon">💼</span>
                        <h2 class="domain-title">BUSINESS - 12-Month Vision</h2>
                    </div>

                    <div class="subsection">
                        <h3>What fruit would make you pleased with progress in 12 months?</h3>
                        
                        <div class="fruit-type reasonable">
                            <h4>Reasonable Fruit <span class="growth-badge">1-2x Growth</span></h4>
                            <p class="description-text">
                                <strong>Reasonable:</strong> Good business results within logical limits. Steady growth and improvements in income and career.
                            </p>
                            <div class="goals-grid">
                                <input type="text" name="business_reasonable_1" placeholder="e.g., 20% revenue increase">
                                <input type="text" name="business_reasonable_2" placeholder="e.g., Hire 2 employees">
                                <input type="text" name="business_reasonable_3" placeholder="e.g., Launch new product">
                                <input type="text" name="business_reasonable_4" placeholder="e.g., Double email list">
                            </div>
                        </div>

                        <div class="fruit-type radical">
                            <h4>Radical Fruit <span class="growth-badge">4-5x Growth</span></h4>
                            <p class="description-text">
                                <strong>Radical:</strong> Extreme business growth beyond reasonable expectations. Major breakthroughs in revenue and impact.
                            </p>
                            <div class="goals-grid">
                                <input type="text" name="business_radical_1" placeholder="e.g., 5x revenue">
                                <input type="text" name="business_radical_2" placeholder="e.g., National expansion">
                                <input type="text" name="business_radical_3" placeholder="e.g., Team of 20">
                                <input type="text" name="business_radical_4" placeholder="e.g., Industry leader">
                            </div>
                        </div>

                        <div class="fruit-type impossible">
                            <h4>Impossible Fruit <span class="growth-badge">10x Growth</span></h4>
                            <p class="description-text">
                                <strong>Impossible:</strong> Complete business transformation that seems impossible. Paradigm-shifting success and wealth creation.
                            </p>
                            <div class="goals-grid">
                                <input type="text" name="business_impossible_1" placeholder="e.g., $10M revenue">
                                <input type="text" name="business_impossible_2" placeholder="e.g., Sell company">
                                <input type="text" name="business_impossible_3" placeholder="e.g., IPO">
                                <input type="text" name="business_impossible_4" placeholder="e.g., Retire at 40">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Section 10: BODY New Quarterly Missions -->
                <div class="section body-section" data-section="10">
                    <div class="domain-header">
                        <span class="domain-icon">💪</span>
                        <h2 class="domain-title">BODY - New Quarterly Missions</h2>
                    </div>

                    <div class="missions-section">
                        <h3>90-Day Action Plan</h3>
                        <p style="margin-bottom: 20px; color: #718096;">Define specific, actionable missions for the next quarter that move you toward your 12-month vision.</p>
                        <div class="goals-grid">
                            <div class="input-group">
                                <label for="body_mission_1">Final Mission #1</label>
                                <textarea id="body_mission_1" name="body_mission_1" placeholder="Specific action for this quarter"></textarea>
                            </div>
                            <div class="input-group">
                                <label for="body_mission_2">Final Mission #2</label>
                                <textarea id="body_mission_2" name="body_mission_2" placeholder="Specific action for this quarter"></textarea>
                            </div>
                            <div class="input-group">
                                <label for="body_mission_3">Final Mission #3</label>
                                <textarea id="body_mission_3" name="body_mission_3" placeholder="Specific action for this quarter"></textarea>
                            </div>
                            <div class="input-group">
                                <label for="body_mission_4">Final Mission #4</label>
                                <textarea id="body_mission_4" name="body_mission_4" placeholder="Specific action for this quarter"></textarea>
                            </div>
                        </div>
                    </div>

                    <div class="metric-section">
                        <h3>Primary Measurable Result</h3>
                        <div class="input-group">
                            <label for="body_primary_metric">What metric will you track?</label>
                            <input type="text" id="body_primary_metric" name="body_primary_metric" placeholder="e.g., Body weight, Body fat %, Mile time">
                        </div>
                        <div class="metric-inputs">
                            <div class="input-group">
                                <label for="body_metric_current">Current Value</label>
                                <input type="number" id="body_metric_current" name="body_metric_current" step="0.01" min="0">
                            </div>
                            <div class="input-group">
                                <label for="body_metric_target">Target Value (End of Quarter)</label>
                                <input type="number" id="body_metric_target" name="body_metric_target" step="0.01" min="0">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Section 11: BEING New Quarterly Missions -->
                <div class="section being-section" data-section="11">
                    <div class="domain-header">
                        <span class="domain-icon">🧠</span>
                        <h2 class="domain-title">BEING - New Quarterly Missions</h2>
                    </div>

                    <div class="missions-section">
                        <h3>90-Day Action Plan</h3>
                        <p style="margin-bottom: 20px; color: #718096;">Define specific, actionable missions for the next quarter that move you toward your 12-month vision.</p>
                        <div class="goals-grid">
                            <div class="input-group">
                                <label for="being_mission_1">Final Mission #1</label>
                                <textarea id="being_mission_1" name="being_mission_1" placeholder="Specific action for this quarter"></textarea>
                            </div>
                            <div class="input-group">
                                <label for="being_mission_2">Final Mission #2</label>
                                <textarea id="being_mission_2" name="being_mission_2" placeholder="Specific action for this quarter"></textarea>
                            </div>
                            <div class="input-group">
                                <label for="being_mission_3">Final Mission #3</label>
                                <textarea id="being_mission_3" name="being_mission_3" placeholder="Specific action for this quarter"></textarea>
                            </div>
                            <div class="input-group">
                                <label for="being_mission_4">Final Mission #4</label>
                                <textarea id="being_mission_4" name="being_mission_4" placeholder="Specific action for this quarter"></textarea>
                            </div>
                        </div>
                    </div>

                    <div class="metric-section">
                        <h3>Primary Measurable Result</h3>
                        <div class="input-group">
                            <label for="being_primary_metric">What metric will you track?</label>
                            <input type="text" id="being_primary_metric" name="being_primary_metric" placeholder="e.g., Meditation days, Journal entries, Books read">
                        </div>
                        <div class="metric-inputs">
                            <div class="input-group">
                                <label for="being_metric_current">Current Value</label>
                                <input type="number" id="being_metric_current" name="being_metric_current" step="0.01" min="0">
                            </div>
                            <div class="input-group">
                                <label for="being_metric_target">Target Value (End of Quarter)</label>
                                <input type="number" id="being_metric_target" name="being_metric_target" step="0.01" min="0">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Section 12: BALANCE New Quarterly Missions -->
                <div class="section balance-section" data-section="12">
                    <div class="domain-header">
                        <span class="domain-icon">⚖️</span>
                        <h2 class="domain-title">BALANCE - New Quarterly Missions</h2>
                    </div>

                    <div class="missions-section">
                        <h3>90-Day Action Plan</h3>
                        <p style="margin-bottom: 20px; color: #718096;">Define specific, actionable missions for the next quarter that move you toward your 12-month vision.</p>
                        <div class="goals-grid">
                            <div class="input-group">
                                <label for="balance_mission_1">Final Mission #1</label>
                                <textarea id="balance_mission_1" name="balance_mission_1" placeholder="Specific action for this quarter"></textarea>
                            </div>
                            <div class="input-group">
                                <label for="balance_mission_2">Final Mission #2</label>
                                <textarea id="balance_mission_2" name="balance_mission_2" placeholder="Specific action for this quarter"></textarea>
                            </div>
                            <div class="input-group">
                                <label for="balance_mission_3">Final Mission #3</label>
                                <textarea id="balance_mission_3" name="balance_mission_3" placeholder="Specific action for this quarter"></textarea>
                            </div>
                            <div class="input-group">
                                <label for="balance_mission_4">Final Mission #4</label>
                                <textarea id="balance_mission_4" name="balance_mission_4" placeholder="Specific action for this quarter"></textarea>
                            </div>
                        </div>
                    </div>

                    <div class="metric-section">
                        <h3>Primary Measurable Result</h3>
                        <div class="input-group">
                            <label for="balance_primary_metric">What metric will you track?</label>
                            <input type="text" id="balance_primary_metric" name="balance_primary_metric" placeholder="e.g., Date nights, Family dinners, Quality time hours">
                        </div>
                        <div class="metric-inputs">
                            <div class="input-group">
                                <label for="balance_metric_current">Current Value</label>
                                <input type="number" id="balance_metric_current" name="balance_metric_current" step="0.01" min="0">
                            </div>
                            <div class="input-group">
                                <label for="balance_metric_target">Target Value (End of Quarter)</label>
                                <input type="number" id="balance_metric_target" name="balance_metric_target" step="0.01" min="0">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Section 13: BUSINESS New Quarterly Missions -->
                <div class="section business-section" data-section="13">
                    <div class="domain-header">
                        <span class="domain-icon">💼</span>
                        <h2 class="domain-title">BUSINESS - New Quarterly Missions</h2>
                    </div>

                    <div class="missions-section">
                        <h3>90-Day Action Plan</h3>
                        <p style="margin-bottom: 20px; color: #718096;">Define specific, actionable missions for the next quarter that move you toward your 12-month vision.</p>
                        <div class="goals-grid">
                            <div class="input-group">
                                <label for="business_mission_1">Final Mission #1</label>
                                <textarea id="business_mission_1" name="business_mission_1" placeholder="Specific action for this quarter"></textarea>
                            </div>
                            <div class="input-group">
                                <label for="business_mission_2">Final Mission #2</label>
                                <textarea id="business_mission_2" name="business_mission_2" placeholder="Specific action for this quarter"></textarea>
                            </div>
                            <div class="input-group">
                                <label for="business_mission_3">Final Mission #3</label>
                                <textarea id="business_mission_3" name="business_mission_3" placeholder="Specific action for this quarter"></textarea>
                            </div>
                            <div class="input-group">
                                <label for="business_mission_4">Final Mission #4</label>
                                <textarea id="business_mission_4" name="business_mission_4" placeholder="Specific action for this quarter"></textarea>
                            </div>
                        </div>
                    </div>

                    <div class="metric-section">
                        <h3>Primary Measurable Result</h3>
                        <div class="input-group">
                            <label for="business_primary_metric">What metric will you track?</label>
                            <input type="text" id="business_primary_metric" name="business_primary_metric" placeholder="e.g., Monthly revenue, Customer count, Profit margin">
                        </div>
                        <div class="metric-inputs">
                            <div class="input-group">
                                <label for="business_metric_current">Current Value</label>
                                <input type="number" id="business_metric_current" name="business_metric_current" step="0.01" min="0">
                            </div>
                            <div class="input-group">
                                <label for="business_metric_target">Target Value (End of Quarter)</label>
                                <input type="number" id="business_metric_target" name="business_metric_target" step="0.01" min="0">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Section 14: Review & Submit -->
                <div class="section" data-section="14">
                    <h2 style="margin-bottom: 30px; color: #2d3748;">Review Your Quarterly Impossible Game</h2>
                    
                    <div class="info-box">
                        <strong>Almost Done!</strong>
                        <p style="margin-top: 10px;">Review your Quarterly Impossible Game summary below. Click Submit when you're ready to receive your AI-powered strategic analysis.</p>
                    </div>

                    <div class="summary-grid" id="summaryContent">
                        <!-- Summary will be populated by JavaScript -->
                    </div>

                    <div class="info-box" style="margin-top: 30px; background: #f0fff4; border-color: #48bb78;">
                        <strong>What Happens Next:</strong>
                        <ul style="margin-top: 10px; margin-left: 20px;">
                            <li>Your assessment will be analyzed by AI for strategic insights</li>
                            <li>You'll receive a comprehensive report via email within 30 minutes</li>
                            <li>Your quarterly missions will be tracked for next quarter's review</li>
                            <li>Weekly check-in reminders will keep you accountable</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="navigation">
                <button type="button" class="nav-btn btn-prev" id="prevBtn" style="display: none;">Previous</button>
                <button type="button" class="nav-btn btn-next" id="nextBtn">Next</button>
                <button type="submit" class="nav-btn btn-submit" id="submitBtn" style="display: none;">Submit Assessment</button>
            </div>
        </form>
    </div>

    <script>
        let currentSection = 1;
        const totalSections = 14;

        // Section titles for step indicator
        const sectionTitles = {
            1: "Personal Info",
            2: "Body Review",
            3: "Being Review",
            4: "Balance Review",
            5: "Business Review",
            6: "Body Vision",
            7: "Being Vision",
            8: "Balance Vision",
            9: "Business Vision",
            10: "Body Missions",
            11: "Being Missions",
            12: "Balance Missions",
            13: "Business Missions",
            14: "Review & Submit"
        };

        function showSection(sectionNumber) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });

            // Show current section
            document.querySelector(`[data-section="${sectionNumber}"]`).classList.add('active');

            // Update progress bar
            const progress = ((sectionNumber - 1) / (totalSections - 1)) * 100;
            document.getElementById('progressBar').style.width = progress + '%';

            // Update step indicator
            document.getElementById('stepIndicator').textContent = `Step ${sectionNumber} of ${totalSections} - ${sectionTitles[sectionNumber]}`;

            // Update navigation buttons
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const submitBtn = document.getElementById('submitBtn');

            if (sectionNumber === 1) {
                prevBtn.style.display = 'none';
            } else {
                prevBtn.style.display = 'block';
            }

            if (sectionNumber === totalSections) {
                nextBtn.style.display = 'none';
                submitBtn.style.display = 'block';
                generateSummary();
            } else {
                nextBtn.style.display = 'block';
                submitBtn.style.display = 'none';
            }

            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function validateSection(sectionNumber) {
            const section = document.querySelector(`[data-section="${sectionNumber}"]`);
            const requiredInputs = section.querySelectorAll('input[required], select[required]');
            
            for (let input of requiredInputs) {
                if (!input.value.trim()) {
                    input.focus();
                    input.style.borderColor = '#e53e3e';
                    setTimeout(() => {
                        input.style.borderColor = '';
                    }, 3000);
                    return false;
                }
            }
            return true;
        }

        function generateSummary() {
            const form = document.getElementById('impossibleGameForm');
            const formData = new FormData(form);
            const summary = document.getElementById('summaryContent');
            
            const domains = ['body', 'being', 'balance', 'business'];
            const domainIcons = {
                body: '💪',
                being: '🧠',
                balance: '⚖️',
                business: '💼'
            };

            let summaryHTML = '';
            
            domains.forEach(domain => {
                const missions = [];
                for (let i = 1; i <= 4; i++) {
                    const mission = formData.get(`${domain}_mission_${i}`);
                    if (mission) missions.push(mission);
                }

                const metric = formData.get(`${domain}_primary_metric`);
                const current = formData.get(`${domain}_metric_current`);
                const target = formData.get(`${domain}_metric_target`);
                const onTrack = formData.get(`${domain}_on_track`);

                summaryHTML += `
                    <div class="summary-card">
                        <h4><span class="domain-icon">${domainIcons[domain]}</span> ${domain.toUpperCase()}</h4>
                        <div class="summary-item"><strong>Current Status:</strong> ${onTrack || 'Not set'}</div>
                        <div class="summary-item"><strong>New Missions:</strong> ${missions.length} defined</div>
                        ${metric ? `<div class="summary-item"><strong>Tracking:</strong> ${metric}</div>` : ''}
                        ${current && target ? `<div class="summary-item"><strong>Target:</strong> ${current} → ${target}</div>` : ''}
                    </div>
                `;
            });

            summary.innerHTML = summaryHTML;
        }

        // Event listeners
        document.getElementById('nextBtn').addEventListener('click', function() {
            if (currentSection < totalSections) {
                if (currentSection === 1 && !validateSection(currentSection)) {
                    alert('Please fill in all required fields before proceeding.');
                    return;
                }
                currentSection++;
                showSection(currentSection);
            }
        });

        document.getElementById('prevBtn').addEventListener('click', function() {
            if (currentSection > 1) {
                currentSection--;
                showSection(currentSection);
            }
        });

        // Set today's date and load previous quarter data
        document.addEventListener('DOMContentLoaded', function() {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('submission_date').value = today;
            
            // Load previous quarter data when email is entered
            document.getElementById('user_email').addEventListener('blur', function() {
                if (this.value) {
                    loadPreviousQuarterData(this.value);
                }
            });
        });

        // Function to load previous quarter data
        async function loadPreviousQuarterData(email) {
            try {
                // This would typically fetch from your backend
                // For now, it checks localStorage as a placeholder
                const storageKey = `quarterly_missions_${email.replace('@', '_')}`;
                const previousData = localStorage.getItem(storageKey);
                
                if (previousData) {
                    const data = JSON.parse(previousData);
                    
                    // Populate previous missions for each domain
                    const domains = ['body', 'being', 'balance', 'business'];
                    domains.forEach(domain => {
                        if (data[domain]) {
                            for (let i = 1; i <= 4; i++) {
                                const missionField = document.getElementById(`${domain}_current_mission_${i}`);
                                if (missionField && data[domain][`mission_${i}`]) {
                                    missionField.value = data[domain][`mission_${i}`];
                                }
                            }
                        }
                    });
                    
                    console.log('Previous quarter data loaded');
                }
            } catch (error) {
                console.error('Error loading previous quarter data:', error);
            }
        }

        // Form submission
        document.getElementById('impossibleGameForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const submitBtn = document.getElementById('submitBtn');
            submitBtn.disabled = true;
            submitBtn.textContent = 'Processing...';
            
            // Collect form data
            const formData = new FormData(this);
            const data = {
                user_name: formData.get('user_name'),
                user_email: formData.get('user_email'),
                assessment_type: 'quarterly_impossible_game',
                responses: {}
            };
            
            // Convert FormData to object
            for (let [key, value] of formData.entries()) {
                data.responses[key] = value;
            }
            
            // Add analytics
            data.analytics = {
                completionTime: Date.now(),
                startTime: Date.now() - (20 * 60 * 1000), // Assume 20 minutes
                totalFields: Array.from(formData.entries()).length,
                completedFields: Array.from(formData.entries()).filter(([k,v]) => v).length,
                completionRate: Math.round((Array.from(formData.entries()).filter(([k,v]) => v).length / Array.from(formData.entries()).length) * 100)
            };
            
            // Add metadata
            data.metadata = {
                userAgent: navigator.userAgent,
                screenResolution: `${screen.width}x${screen.height}`,
                timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
                submissionDate: new Date().toISOString()
            };
            
            try {
                // Save current missions for next quarter reference
                const missionsData = {
                    body: {
                        mission_1: formData.get('body_mission_1'),
                        mission_2: formData.get('body_mission_2'),
                        mission_3: formData.get('body_mission_3'),
                        mission_4: formData.get('body_mission_4')
                    },
                    being: {
                        mission_1: formData.get('being_mission_1'),
                        mission_2: formData.get('being_mission_2'),
                        mission_3: formData.get('being_mission_3'),
                        mission_4: formData.get('being_mission_4')
                    },
                    balance: {
                        mission_1: formData.get('balance_mission_1'),
                        mission_2: formData.get('balance_mission_2'),
                        mission_3: formData.get('balance_mission_3'),
                        mission_4: formData.get('balance_mission_4')
                    },
                    business: {
                        mission_1: formData.get('business_mission_1'),
                        mission_2: formData.get('business_mission_2'),
                        mission_3: formData.get('business_mission_3'),
                        mission_4: formData.get('business_mission_4')
                    }
                };
                
                // Store for next quarter (this would typically go to your backend)
                const storageKey = `quarterly_missions_${formData.get('user_email').replace('@', '_')}`;
                localStorage.setItem(storageKey, JSON.stringify(missionsData));
                
                console.log('Submitting to webhook:', data);
                
                // Submit to n8n webhook with timeout
                const controller = new AbortController();
                const timeoutId = setTimeout(() => controller.abort(), 30000); // 30 second timeout
                
                const response = await fetch('https://n8n-production-3280.up.railway.app/webhook/quarterly-impossible-game', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Accept': 'application/json'
                    },
                    body: JSON.stringify(data),
                    signal: controller.signal,
                    mode: 'cors'
                });
                
                clearTimeout(timeoutId);
                
                if (response.ok) {
                    const result = await response.text();
                    console.log('Submission successful:', result);
                    alert('✅ Your Quarterly Impossible Game has been submitted successfully!\n\nYou will receive your strategic analysis via email within 30 minutes.');
                    
                    // Reset form
                    this.reset();
                    currentSection = 1;
                    showSection(1);
                    
                    // Reset progress steps
                    document.querySelectorAll('.step').forEach((step, index) => {
                        step.classList.remove('completed', 'active');
                        if (index === 0) step.classList.add('active');
                    });
                } else {
                    console.error('Server responded with:', response.status, response.statusText);
                    throw new Error(`Server error: ${response.status}`);
                }
            } catch (error) {
                console.error('Submission error:', error);
                
                if (error.name === 'AbortError') {
                    alert('⚠️ The submission timed out. Please check your internet connection and try again.');
                } else if (error.message.includes('Failed to fetch')) {
                    alert('⚠️ Could not connect to the server. This might be a CORS issue or the webhook might not be active.\n\nPlease try again or contact support.');
                } else {
                    alert(`⚠️ There was an error submitting your assessment:\n${error.message}\n\nPlease try again or contact support.`);
                }
            }
            } finally {
                submitBtn.disabled = false;
                submitBtn.textContent = 'Submit Assessment';
            }
        });

        // Update progress steps when changing sections
        function updateProgressSteps(sectionNumber) {
            document.querySelectorAll('.step').forEach((step, index) => {
                if (index + 1 < sectionNumber) {
                    step.classList.add('completed');
                    step.classList.remove('active');
                } else if (index + 1 === sectionNumber) {
                    step.classList.add('active');
                    step.classList.remove('completed');
                } else {
                    step.classList.remove('active', 'completed');
                }
            });
        }

        // Update showSection to include progress steps
        function showSection(sectionNumber) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });

            // Show current section
            document.querySelector(`[data-section="${sectionNumber}"]`).classList.add('active');

            // Update progress bar
            const progress = ((sectionNumber - 1) / (totalSections - 1)) * 100;
            document.getElementById('progressBar').style.width = progress + '%';

            // Update step indicator
            document.getElementById('stepIndicator').textContent = `Step ${sectionNumber} of ${totalSections} - ${sectionTitles[sectionNumber]}`;

            // Update progress steps
            updateProgressSteps(sectionNumber);

            // Update navigation buttons
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const submitBtn = document.getElementById('submitBtn');

            if (sectionNumber === 1) {
                prevBtn.style.display = 'none';
            } else {
                prevBtn.style.display = 'block';
            }

            if (sectionNumber === totalSections) {
                nextBtn.style.display = 'none';
                submitBtn.style.display = 'block';
                generateSummary();
            } else {
                nextBtn.style.display = 'block';
                submitBtn.style.display = 'none';
            }

            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
    </script>
</body>
</html>
